# Slide Code Test - é–‹ç™ºãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

## ğŸ”§ æœ€æ–°ã®ä¿®æ­£å±¥æ­´
- **2024-09-20**: GPT-5ãƒ¢ãƒ‡ãƒ«è¨­å®šã‚’ä¿®æ­£ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«ã‚’gpt-4o-miniã‹ã‚‰GPT-5ã«å¤‰æ›´
- **2024-09-20**: AI Tool Executionæ©Ÿèƒ½ã‚’å®Ÿè£…ã€codexã‚·ã‚¹ãƒ†ãƒ ã¨åŒç­‰ã®æ©Ÿèƒ½ã‚’è¿½åŠ ï¼ˆMCPå¯¾å¿œã‚’é™¤ãï¼‰
- **2024-09-20**: TUIãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤æ©Ÿèƒ½ã‚’å¼·åŒ–ã€ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å·®åˆ†è¡¨ç¤ºã€ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ 
- **2024-09-20**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã®æ›¸å¼è¨­å®šã‚’æ”¹å–„ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã®è‰²åˆ†ã‘è¡¨ç¤ºã‚’å®Ÿè£…

## ğŸ—ï¸ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç›®çš„ã¨è²¬å‹™

**Slide Code Test**ã¯ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ãƒ™ãƒ¼ã‚¹ã®AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¨ã—ã¦å‹•ä½œã™ã‚‹Rustè£½CLIãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ä¸»ãªæ©Ÿèƒ½ï¼š

1. **å¯¾è©±çš„ã‚¹ãƒ©ã‚¤ãƒ‰ç”Ÿæˆ**: ãƒãƒ£ãƒƒãƒˆå½¢å¼ã§Markdownã‚¹ãƒ©ã‚¤ãƒ‰ã‚’ä½œæˆ
2. **TUIãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: ratatui ã‚’ä½¿ç”¨ã—ãŸã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§ã®ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
3. **AI Tool Execution**: ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã€ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã€ãƒ‘ãƒƒãƒé©ç”¨ãªã©ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œæ©Ÿèƒ½
4. **ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œ**: å®‰å…¨ãªã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œç’°å¢ƒ
5. **ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Node.jsãƒ©ãƒ³ãƒãƒ£ãƒ¼çµŒç”±ã§ãƒã‚¤ãƒ†ã‚£ãƒ–Rustãƒã‚¤ãƒŠãƒªã‚’å®Ÿè¡Œ

## ğŸ“ ä¸»è¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
slide-code-test/
â”œâ”€â”€ slide-rs/               # ãƒ¡ã‚¤ãƒ³Rustãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹
â”‚   â”œâ”€â”€ cli/                # ãƒ¡ã‚¤ãƒ³CLIã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ tui/                # ã‚¿ãƒ¼ãƒŸãƒŠãƒ«UIï¼ˆratatuiä½¿ç”¨ï¼‰
â”‚   â”œâ”€â”€ core/               # ã‚³ã‚¢æ©Ÿèƒ½ãƒ»ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
â”‚   â”œâ”€â”€ chatgpt/            # OpenAI APIé€£æºï¼ˆGPT-5å¯¾å¿œï¼‰
â”‚   â”œâ”€â”€ common/             # å…±é€šãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”œâ”€â”€ ansi-escape/        # ANSI to ratatuiå¤‰æ›
â”‚   â”œâ”€â”€ apply-patch/        # ãƒ‘ãƒƒãƒé©ç”¨ãƒ„ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ arg0/               # ãƒã‚¤ãƒŠãƒªãƒ‡ã‚£ã‚¹ãƒ‘ãƒƒãƒ
â”‚   â”œâ”€â”€ protocol/           # é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«
â”‚   â””â”€â”€ slides-tools/       # ã‚¹ãƒ©ã‚¤ãƒ‰ç”Ÿæˆãƒ„ãƒ¼ãƒ«
â”œâ”€â”€ slide-cli/              # Node.jsãƒ©ãƒ³ãƒãƒ£ãƒ¼
â”œâ”€â”€ core/                   # ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ã‚¢ï¼ˆä»Šå¾Œçµ±åˆäºˆå®šï¼‰
â”œâ”€â”€ chatgpt/                # ãƒ¬ã‚¬ã‚·ãƒ¼ChatGPTï¼ˆä»Šå¾Œçµ±åˆäºˆå®šï¼‰
â””â”€â”€ slides/                 # ç”Ÿæˆã•ã‚ŒãŸã‚¹ãƒ©ã‚¤ãƒ‰
```

## âš™ï¸ æŠ€è¡“çš„ãªå®Ÿè£…è©³ç´°

### Core Technologies
- **Rust 2021 Edition**: ãƒ¡ã‚¤ãƒ³å®Ÿè£…è¨€èª
- **ratatui 0.29**: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«UIæ¡†æ¶
- **tokio**: éåŒæœŸå‡¦ç†
- **OpenAI API**: GPT-5ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨
- **serde**: ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º/ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º
- **clap**: CLIå¼•æ•°å‡¦ç†

### é‡è¦ãªå®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

#### `/slide-rs/core/src/` - ã‚³ã‚¢æ©Ÿèƒ½
- **`exec.rs`**: ãƒ¡ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ã€ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œã€æ‰¿èªãƒ•ãƒ­ãƒ¼
- **`shell.rs`**: ã‚·ã‚§ãƒ«è¨­å®šï¼ˆZsh/PowerShellå¯¾å¿œï¼‰
- **`is_safe_command.rs`**: ã‚³ãƒãƒ³ãƒ‰å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ã€è¨±å¯ãƒªã‚¹ãƒˆç®¡ç†
- **`tool_executor.rs`**: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
- **`tool_apply_patch.rs`**: ãƒ‘ãƒƒãƒé©ç”¨ãƒ„ãƒ¼ãƒ«
- **`openai_tools.rs`**: OpenAI Functionså®šç¾©

#### `/slide-rs/chatgpt/src/client.rs` - AI APIé€£æº
- **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ¢ãƒ‡ãƒ«**: `gpt-5` (æœ€æ–°ä¿®æ­£æ¸ˆã¿)
- **ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å¯¾å¿œ**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¿œç­”
- **Function Calling**: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œæ©Ÿèƒ½çµ±åˆ

#### `/slide-rs/tui/src/` - ã‚¿ãƒ¼ãƒŸãƒŠãƒ«UI
- **`widgets/chat.rs`**: ãƒãƒ£ãƒƒãƒˆã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã€ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œçµæœã®è‰²åˆ†ã‘è¡¨ç¤º
- **`streaming.rs`**: ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›¸å¼è¨­å®š

### AI Tool Execution æ©Ÿèƒ½

codexã‚·ã‚¹ãƒ†ãƒ ã¨åŒç­‰ã®ä»¥ä¸‹ã®ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œæ©Ÿèƒ½ã‚’å®Ÿè£…ï¼š

1. **Exec Tool**: ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ
   - ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹å®Ÿè¡Œç’°å¢ƒ
   - å®‰å…¨æ€§ãƒã‚§ãƒƒã‚¯ï¼ˆí—ˆê°€ãƒªã‚¹ãƒˆæ–¹å¼ï¼‰
   - æ‰¿èªãƒ•ãƒ­ãƒ¼ï¼ˆå±é™ºã‚³ãƒãƒ³ãƒ‰ã®äº‹å‰ç¢ºèªï¼‰
   - ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°å‡ºåŠ›

2. **Apply Patch Tool**: ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒƒãƒé©ç”¨
   - unified diffå½¢å¼å¯¾å¿œ
   - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ©Ÿèƒ½
   - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

3. **Display Formatting**: ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œçµæœã®è¦–è¦šçš„è¡¨ç¤º
   - **å·®åˆ†è¡¨ç¤º**: `+`è¡Œï¼ˆç·‘ï¼‰ã€`-`è¡Œï¼ˆèµ¤ï¼‰ã€`@@`è¡Œï¼ˆé’ï¼‰
   - **ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ˜ãƒƒãƒ€ãƒ¼**: "Updated Plan"ï¼ˆé’ï¼‰ã€"Proposed Change"ï¼ˆé»„ï¼‰ã€"Change Approved"ï¼ˆç·‘ï¼‰
   - **ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹**: `â–¡`ï¼ˆã‚°ãƒ¬ãƒ¼ï¼‰ã€`â˜‘`ï¼ˆç·‘ï¼‰
   - **ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹**: `.rs`, `.toml`, `.md`ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆãƒ©ã‚¤ãƒˆãƒ–ãƒ«ãƒ¼ï¼‰

## ğŸ¨ å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```rust
// anyhow::Result ã‚’çµ±ä¸€çš„ã«ä½¿ç”¨
pub async fn process_exec_tool_call(
    params: ExecParams,
    // ...
) -> Result<ExecToolCallOutput>
```

### éåŒæœŸå‡¦ç†ãƒ‘ã‚¿ãƒ¼ãƒ³
```rust
// tokio::process::Command ã‚’ä½¿ç”¨
let mut child = tokio::process::Command::new(&command[0])
    .args(&command[1..])
    .stdout(Stdio::piped())
    .stderr(Stdio::piped())
    .spawn()?;
```

### TUIã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
```rust
// ratatui::style::Color ã‚’ä½¿ç”¨ã—ãŸçµ±ä¸€çš„ãªè‰²åˆ†ã‘
Style::default().fg(Color::Green)    // æˆåŠŸãƒ»è¿½åŠ 
Style::default().fg(Color::Red)      // ã‚¨ãƒ©ãƒ¼ãƒ»å‰Šé™¤
Style::default().fg(Color::Blue)     // æƒ…å ±ãƒ»ãƒ˜ãƒƒãƒ€ãƒ¼
Style::default().fg(Color::Yellow)   // è­¦å‘Šãƒ»å¤‰æ›´ææ¡ˆ
```

## ğŸ‘¥ é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### ãƒ“ãƒ«ãƒ‰ï¼†å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```bash
# é–‹ç™ºå®Ÿè¡Œ
npm run dev
# ã¾ãŸã¯
./slide.sh

# Rustãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
cd slide-rs && cargo build --release

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
cargo test

# å‹ãƒã‚§ãƒƒã‚¯
cargo check
```

### TUIå®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```bash
# ãƒ¡ã‚¤ãƒ³TUIã‚¢ãƒ—ãƒª
slide

# ã‚¹ãƒ©ã‚¤ãƒ‰ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
slide preview slides/sample.md
```

### ç’°å¢ƒå¤‰æ•°è¨­å®š
```bash
# .env.local ã¾ãŸã¯ env.local ã«è¨­å®š
OPENAI_API_KEY=your_api_key_here
SLIDE_APP=1  # Slideãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹åŒ–
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒãƒªã‚·ãƒ¼

#### å®‰å…¨ãªã‚³ãƒãƒ³ãƒ‰ï¼ˆè‡ªå‹•å®Ÿè¡Œå¯èƒ½ï¼‰
- èª­ã¿å–ã‚Šå°‚ç”¨: `ls`, `cat`, `grep`, `head`, `tail`, `pwd`
- Gitèª­ã¿å–ã‚Š: `git status`, `git log`, `git diff`, `git show`
- ã‚·ã‚¹ãƒ†ãƒ æƒ…å ±: `whoami`, `date`, `uname`, `env`

#### å±é™ºãªã‚³ãƒãƒ³ãƒ‰ï¼ˆæ‰¿èªå¿…é ˆï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ: `rm`, `mv`, `cp`, `chmod`, `chown`
- ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯: `curl`, `wget`
- æ¨©é™æ˜‡æ ¼: `sudo`, `su`

### ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
```rust
// unwrap()ä½¿ç”¨ç¦æ­¢ï¼ˆClippyè¨­å®šæ¸ˆã¿ï¼‰
unwrap_used = "deny"

// expect()ä½¿ç”¨ç¦æ­¢
expect_used = "deny"

// Result<T>ã¯å¿…ãšãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã™ã‚‹
#[must_use]
```

## ğŸ› ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. OpenAI APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼
```bash
Error: "Missing OPENAI_API_KEY"
```
**è§£æ±º**: `.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã«APIã‚­ãƒ¼ã‚’è¨­å®š

#### 2. ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ï¼ˆæœ€æ–°ã‚³ãƒŸãƒƒãƒˆå¾Œï¼‰
```bash
error[E0433]: failed to resolve: use of undeclared crate or module
```
**è§£æ±º**: `cargo clean && cargo build`ã§å†ãƒ“ãƒ«ãƒ‰

#### 3. TUIè¡¨ç¤ºå´©ã‚Œ
```bash
# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚µã‚¤ã‚ºã‚’ãƒªã‚»ãƒƒãƒˆ
export TERM=xterm-256color
resize
```

#### 4. ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒãŒå‹•ä½œã—ãªã„
- ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹è¨­å®šã‚’ç¢ºèª: `SandboxType::Disabled`ã§ãƒ†ã‚¹ãƒˆ
- ãƒ­ã‚°ç¢ºèª: `http://127.0.0.1:6060/`ã§ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢é–‹ã

### ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰
```bash
# ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«è¨­å®š
RUST_LOG=debug cargo run

# è©³ç´°ãƒ­ã‚°å‡ºåŠ›
RUST_LOG=slide_core=trace cargo run
```

### ä¾å­˜é–¢ä¿‚ã®å•é¡Œ
```bash
# ä¾å­˜é–¢ä¿‚æ›´æ–°
cargo update

# ç‰¹å®šã‚¯ãƒ¬ãƒ¼ãƒˆå†ãƒ“ãƒ«ãƒ‰
cargo build -p slide-core
```

## ğŸ“‹ ä»Šå¾Œã®é–‹ç™ºæ–¹é‡

### å„ªå…ˆåº¦é«˜
- [ ] ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã®å®Œå…¨ä¿®æ­£
- [ ] MCPï¼ˆModel Context Protocolï¼‰å¯¾å¿œ
- [ ] ãƒ¯ãƒ³ã‚·ãƒ§ãƒƒãƒˆç”Ÿæˆãƒ¢ãƒ¼ãƒ‰å®Ÿè£…
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°æ”¹å–„

### å„ªå…ˆåº¦ä¸­
- [ ] ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰ã®çµ±åˆï¼ˆcore/, chatgpt/ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
- [ ] ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸å‘ä¸Š
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### å„ªå…ˆåº¦ä½
- [ ] Windows PowerShellã‚µãƒãƒ¼ãƒˆå¼·åŒ–
- [ ] è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç®¡ç†UI
- [ ] ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 

---

**ğŸ¤– ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ Claude Code ã«ã‚ˆã‚‹è‡ªå‹•è§£æã«åŸºã¥ã„ã¦ä½œæˆã•ã‚Œã¾ã—ãŸ**

**Co-Authored-By: Claude <noreply@anthropic.com>**